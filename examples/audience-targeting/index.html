<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="">
  <link rel="stylesheet" href="https://s3-us-west-2.amazonaws.com/design.optimizely.com/oui/latest/styles.css">
  <style>
    body { padding: 30px; }
  </style>
  <title>JS SDK Audience Targeting</title>
</head>
<body>
  <h1 id="title">Audience Targeting Example</h1>

  <table class="table">
    <thead>
      <tr>
        <th>User ID</th>
        <th>User City</th>
        <th>Feature Enabled</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>1</td><td>Austin</td><td id="user-1-enabled">calculating...</td></tr>
      <tr><td>2</td><td>San Francisco</td><td id="user-2-enabled">calculating...</td></tr>
      <tr><td>3</td><td>New York</td><td id="user-3-enabled">calculating...</td></tr>
    </tbody>
  </table>
  <script src="https://unpkg.com/@optimizely/optimizely-sdk/dist/optimizely.browser.umd.min.js"></script>
  <script>
    const FEATURE_KEY = 'audience_target_example';

    const listOfUsers = [
      { id: '1', city: 'Austin' },
      { id: '2', city: 'San Francisco' },
      { id: '3', city: 'New York' },
    ];

    const optimizely = window.optimizelySdk.createInstance({
      sdkKey: '{{OPTY_SDK_KEY}}',
    });

    optimizely.onReady().then(() => {
      listOfUsers.forEach(user => {
        const isEnabled = optimizely.isFeatureEnabled(FEATURE_KEY, user.id, user)
        document.getElementById(`user-${user.id}-enabled`).innerHTML = isEnabled ? "✅" : "❌";
      });
    });
  </script>
</body>
</html>
